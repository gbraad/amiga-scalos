filescalosAPI.docContent-Type: text/html


	<HTML><HEAD><TITLE>scalosAPI</TITLE></HEAD><BODY BACKGROUND='http://scalos.striatum.org/gfx/backdrop.gif'>
	
	<FONT SIZE="5"><B>scalosAPI</B></FONT><P><UL>
	<LI><A HREF="#1">--background</A></LI><LI><A HREF="#2">--Scalos_Message</A></LI><LI><A HREF="#3">--Modules</A></LI><LI><A HREF="#4">--PlugIn's</A></LI><LI><A HREF="#5">--MenuPlugIn's</A></LI><LI><A HREF="#6">SM_AddIcon</A></LI><LI><A HREF="#7">SM_AppSleep</A></LI><LI><A HREF="#8">SM_AppWakeup</A></LI><LI><A HREF="#9">SM_CloseWindow</A></LI><LI><A HREF="#10">SM_Iconify</A></LI><LI><A HREF="#11">SM_NewPattern</A></LI><LI><A HREF="#12">SM_Redraw</A></LI><LI><A HREF="#13">SM_RemIcon</A></LI><LI><A HREF="#14">SM_Requester</A></LI><LI><A HREF="#15">SM_RunMenuCmd</A></LI><LI><A HREF="#16">SM_RunProcess</A></LI><LI><A HREF="#17">SM_ShowPopupMenu</A></LI><LI><A HREF="#18">SM_ShowTitle</A></LI><LI><A HREF="#19">SM_Sleep</A></LI><LI><A HREF="#20">SM_UnIconify</A></LI><LI><A HREF="#21">SM_Update</A></LI><LI><A HREF="#22">SM_UpdateIcon</A></LI><LI><A HREF="#23">SM_Wakeup</A></LI></UL><P><UL><UL><A NAME="1"><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	--background<BR><BR>    DESCRIPTION<BR>	This documentation gives you information how to communicate with <BR>	Scalos and its windowtasks. There are not many MessageTypes <BR>	currently available, but it will be more in future.<BR><BR></UL><HR><A NAME="#2"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	--Scalos_Message<BR><BR>    DESCRIPTION<BR>	If you send a message to scalos you should use the SCA_AllocMessage() <BR>	and SCA_FreeMessage() calls from the scalos.library. The returned <BR>	message will look like this:<BR><BR>	struct ScalosMessage<BR>	{<BR>		struct Message sm_Message;<BR>		ULONG  sm_Signature;	/* &quot;IMSG&quot; */<BR>		ULONG  sm_MessageType;<BR>	};<BR><BR>	The message ports where to sent the messages to are available via <BR>	the SCA_LockWindowList() / SCA_UnLockWindowList() calls from <BR>	scalos.library.<BR><BR>	Additional data depends upon MessageType.<BR>	SYNOPSIS will give you information about this data. INPUTS means the <BR>	message for PutMsg() and RESULT the one that was replied.<BR><BR></UL><HR><A NAME="#3"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	--Modules<BR><BR>    DESCRIPTION<BR>	Modules are programs with a standard wb-start enviroment. The <BR>	arguments are additional values (e.g. Execute_Command: the dir and <BR>	the filename as default value for the string-gadget).<BR><BR></UL><HR><A NAME="#4"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	--PlugIn's<BR><BR>    DESCRIPTION<BR>	PlugIn's are external BOOPSI Classes that will enhance or replace <BR>	internal classes. The only thing you have to do is to write a little <BR>	shared library with only one offset. The library base should have at<BR>	least a structure of a Library structure followed by a longword<BR>	(four bytes). These four bytes are used to store an identifier so that<BR>	Scalos can know that it is a Scalos plugin. The value for these four<BR>	bytes should be 'PLUG' (which you should set in the initialisation<BR>	routine of your plugin, or the auto initialisation).<BR><BR>	The one specific offset (it must be the first public function of your<BR>	library if you decide to have more functions) has to return a ScaClassInfo<BR>	struct. Your PlugIn can be added automatically on startup if you <BR>	add it to the PlugIn list in Scalos Prefs.<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	ScaClassInfo SCAGetClassInfo()<BR>		D0<BR><BR>	struct ScaClassInfo *SCAGetClassInfo( void );<BR><BR></UL><HR><A NAME="#5"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	--MenuPlugIn's<BR><BR>    DESCRIPTION<BR>	A MenuPlugIn is a little library with one function. As with the standard<BR>	plugins, your plugin function must be the first public function of the<BR>	library. Menu plugins also require an identifier in the four bytes<BR>	following the Library structure of the library base. In the case of menu<BR>	plugins, the value for these four bytes should be 'OOPP'.<BR><BR>	This function<BR>	have to be full reentrant. The windowtask is blocked until your <BR>    FUNCTION returns. Never open a requester or block the task for a <BR>	long time use SCCM_AsyncRoutine instead.<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	SCAMenuFunction( WindowTask, IconNode)<BR>					 A0          A1<BR><BR>	void SCAMenuFunction( struct ScaWindowTask *, struct ScaIconNode *);<BR><BR>    NOTES<BR>	In order to get a pointer to the IconNode, your plugin must be<BR>	called from an popup menu. When called from a screen menu, the IconNode<BR>	pointer is always NULL.<BR><BR></UL><HR><A NAME="#6"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_CloseWindow<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Closes the window of the selected messageport.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL><BR></UL><HR><A NAME="#7"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_NewPattern<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	APTR nmnp_PatternNode<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Sets a new pattern for the window<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	snmp_PatternNode - the new pattern or NULL for no pattern.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL><BR></UL><HR><A NAME="#8"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_Sleep<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	The windowtask that receives this message will be sleep. Only the<BR>	window will be closed, no icon will be displayed.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL><BR>    RETURNS<BR><BR>    NOTES<BR>	Never send this message to a the main_messageport!<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	SM_Wakeup<BR><BR></UL><HR><A NAME="#9"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_Wakeup<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	ULONG   smwu_ReLayout<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Wakeup the selected window_task. It's the opposite to SM_Sleep.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smwu_ReLayout - BOOL<BR>	   TRUE if all icons of the window should be relayouted.<BR>	   This is especially important when WorkBench screen has changed.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>	NOTE<BR></B></FONT><UL>	Never send this message to a the main_messageport!<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	SM_Sleep<BR><BR></UL><HR><A NAME="#10"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_AppSleep<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	All windowtasks and all ScalosApplications will fall asleep.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>	NOTE<BR></B></FONT><UL>	This message must be sent to the main_messageport!<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	SM_AppWakeup<BR><BR></UL><HR><A NAME="#11"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_AppWakeup<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	ULONG   smaw_ReLayout<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Wakeup all thing that sleeps since SM_AppSleep.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smaw_ReLayout - TRUE if all icons should be relayouted.<BR>	   This is especially important when WorkBench screen has changed.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>	NOTE<BR></B></FONT><UL>	This message must be sent to the main_messageport!<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	SM_AppSleep<BR><BR></UL><HR><A NAME="#12"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_Redraw<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	ULONG   smmr_Flags<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Redraws the icons inside of the window. This method could be uses to<BR>	refresh the window after adding or selecting/deselecting icons.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smmr_Flags - <BR>		REDRAWB_DontEraseWindow : don't erase window before redraw<BR>		REDRAWB_ReLayoutIcons : relayout icons<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL><BR></UL><HR><A NAME="#13"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_ShowPopupMenu<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	struct PopupMenu *pm<BR>	struct ScaIconNode *in<BR>	ULONG Flags<BR>	struct FileTypeDef *fType<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Show a popup menu and execute the user's menu command.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	pm - Popup menu to display.<BR>	in - Scalos icon node the popup menu should be associated to. <BR>	     Can be NULL for window popup menus.<BR>	Flags - Show which items are still locked and HAVE TO BE UNLOCKED <BR>	     during processing.<BR>	     SHOWPOPUPFLGF_IconSemaLocked - wt_IconSemaphore is still locked<BR>	     SHOWPOPUPFLGF_WinListLocked - Scalos window list is still locked.<BR>	fType - Private data structure for support of file type specific <BR>	     popup menus. Should be NULL if unused.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL><BR></UL><HR><A NAME="#14"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_Update<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Causes the window to reread its icons.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL><BR></UL><HR><A NAME="#15"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_UpdateIcon<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	BPTR smui_DirLock<BR>	CONST_STRPTR smui_IconName<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Refresh a selected icon.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smui_DirLock - Lock to parent dir of icon.<BR>	smui_IconName - Name of the icon.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	scalos.library/SCA_UpdateIcon()<BR></UL><HR><A NAME="#16"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_AddIcon<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	UWORD	smai_x<BR>	UWORD	smai_y<BR>	BPTR	smai_DirLock<BR>	STRPTR	smai_IconName<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Causes a window task to load a selected icon.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smai_x<BR>	smai_y - the position where the icon should appear or 0x8000 for any<BR>	smai_DirLock - Lock to parent dir of icon.<BR>	smai_IconName - Name of the icon.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL><BR></UL><HR><A NAME="#17"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_RemIcon<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	BPTR	smri_DirLock<BR>	STRPTR	smri_IconName<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Removes an icon from window.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smri_DirLock - Lock to parent dir of icon.<BR>	smri_IconName - Name of the icon.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL><BR></UL><HR><A NAME="#18"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_Iconify<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Set the window to sleep and adds an icon to the main window.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL><BR></UL><FONT SIZE="4"><B>	NOTE<BR></B></FONT><UL>	Never send this message to the main window!<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	SM_UnIconify<BR><BR></UL><HR><A NAME="#19"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_UnIconify<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Removes the appicon from main window and reopens the window.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>	NOTE<BR></B></FONT><UL>	Never send this message to the main window!<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	SM_Iconify<BR></UL><HR><A NAME="#20"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_RunMenuCmd<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	APTR smrm_MenuItem<BR>	struct ScaIconNode *smrm_IconNode<BR>	ULONG smrm_Flags<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	This message is used to execute a Scalos menu command in some <BR>	other window task's context.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smrm_MenuItem - internal Scalos menu item descriptor<BR>	smrm_IconNode - Iconnode to execute the command with.<BR>	smrm_Flags - none defined yet.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL></UL><HR><A NAME="#21"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_ShowTitle<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	ULONG smst_showTitle<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	This message is used to set the screen title bar display mode.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smst_showTitle - Screen title bar mode<BR>	   If TRUE, the screen's title bar will be shown in front of <BR>	   WFLG_BACKDROP windows.<BR>           If FALSE, the title bar will be rendered behind all windows.<BR><BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL></UL><HR><A NAME="#22"><BR><BR>    </LI><LI><B><FONT SIZE="4">NAME</FONT></B><UL><BR>	SM_Requester<BR><BR></UL><FONT SIZE="4"><B>    SYNOPSIS<BR></B></FONT><PRE>	union	{<BR>		ULONG 		smrq_ReqResult;<BR>		struct	Window 	*smrq_ParentWindow;<BR>		};<BR>	APTR			smrq_ArgList;<BR>	struct	EasyStruct 	smrq_ez;<BR>	UBYTE			smrq_ArgListBuffer[0];<BR><BR></PRE>&nbsp;<BR><FONT SIZE="4"><B>    FUNCTION<BR></B></FONT><UL>	Asynchronously pops up a requester and returns the result.<BR><BR></UL><FONT SIZE="4"><B>    INPUTS<BR></B></FONT><UL>	smrq_ParentWindow - designates which screen to open the requester on.<BR>	smrq_ReqResult - Here the result from EaysRequest() is returned.<BR>	smrq_ArgList - pointer to ArgList for EasyRequestArgs().<BR>	smrq_ez - Contains information for EasyRequestArgs()<BR>	smrq_ArgListBuffer - buffer for ArgList - allocated as large as needed.<BR>		Put the required buffer length into the additional_size<BR>		parameter of the SCA_AllocMessage() call.<BR><BR>    RETURNS<BR><BR></UL><FONT SIZE="4"><B>    SEE ALSO<BR></B></FONT><UL>	intuition.library/EasyRequestArgs()<BR>	scalos/SCA_AllocMessage()<BR></UL><HR><A NAME="#23"><BR> 
	</LI></UL><P align="right">
	Generated on 12th April 2004 by ad2html.pl v0.87 by <A HREF="http://www.philprice.net" TARGET="_blank">Phil Price</A>
	</BODY></HTML>
	